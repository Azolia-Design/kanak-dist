import{j as e}from"./jsx-runtime.KYujgZxC.js";/* empty css                           */import{r as a}from"./index.068npczX.js";import{u as A}from"./useOutsideAlerter.EpDpS4QS.js";import{c as p}from"./text.q5Rw84jT.js";function g(t){return e.jsxs("button",{className:`resource-main-list-head-filter-item ${t.isActive?"active":""}`,onClick:t.onClick,"data-filter":t.name,children:[e.jsx("div",{className:"txt txt-20 txt-bold resource-main-list-head-filter-item-txt",children:t.name}),e.jsxs("div",{className:"txt txt-12 txt-medium resource-main-list-head-filter-item-count",children:["[",t.count,"]"]}),e.jsx("div",{className:"line"})]})}function k({data:t,idx:l}){return e.jsxs("a",{href:`/resources/${t.uid}`,className:"resource-main-list-main-item",children:[e.jsx("div",{className:"resource-main-list-main-item-img",children:e.jsx("div",{className:"resource-main-list-main-item-img-inner",children:e.jsx("img",{className:"img img-fill",src:t.data.feature_image.url,alt:t.data.feature_image.alt,width:t.data.feature_image.dimensions.width,height:t.data.feature_image.dimensions.height})})}),e.jsxs("div",{className:"resource-main-list-main-item-content",children:[e.jsx("div",{href:"#",className:"txt txt-20 txt-bold resource-main-list-main-item-cate",children:t.data.category}),e.jsx("h4",{href:"#",className:"heading h5 txt-black txt-up resource-main-list-main-item-title",children:t.data.title}),e.jsx("p",{className:"txt txt-18 txt-med resource-main-list-main-item-subtitle",children:t.data.sapo}),e.jsx("span",{className:"txt txt-18 txt-med resource-main-list-main-item-date",children:p(t.last_publication_date)})]}),e.jsx("div",{className:"line"}),l%2==0?e.jsx("div",{className:"line line-ver"}):""]})}function $(t){const{data:l}=t,[r,j]=a.useState("All"),[m,x]=a.useState(l),[c,N]=a.useState(4),[n,o]=a.useState(!1),h=a.useRef(),d=[];A(h,()=>{o(!1)}),l.map((i,s)=>{!d.includes(i.data.category)&&d.push(i.data.category)});const v=a.useMemo(()=>e.jsxs(e.Fragment,{children:[e.jsx(g,{name:"All",count:l.length,isActive:r=="All",onClick:i=>{f(i),o(!1)}}),d.map((i,s)=>e.jsx(g,{name:i,count:l.filter(({data:u})=>u.category==i).length,isActive:r==i,onClick:u=>{f(u),o(!1)}},s))]}),[r]),b=a.useMemo(()=>m.map((i,s)=>s<c&&e.jsx(k,{data:i,idx:s},s)),[m,c]);function f(i){let s=i.target.dataset.filter;j(s)}return a.useEffect(()=>{if(r=="All")x(l);else{let i=l.filter(({data:s})=>s.category==r);x(i)}},[r]),a.useEffect(()=>{console.log(n)},[n]),e.jsxs("div",{className:"resource-main-list",children:[e.jsxs("div",{className:"resource-main-list-head",children:[e.jsx("h3",{className:"heading h4 txt-black txt-up resource-main-list-head-title",children:"Articles"}),e.jsxs("div",{className:"resource-main-list-head-filter",ref:h,children:[e.jsxs("button",{className:"resource-main-list-head-filter-toggle",onClick:()=>{o(!n)},children:[e.jsx("div",{className:"txt txt-18 txt-bold resource-main-list-head-filter-toggle-txt",children:r=="All"?"Categories":r}),e.jsx("div",{className:`ic ic-20 resource-main-list-head-filter-toggle-ic ${n?"open":""}`,children:t.icDropDown})]}),e.jsx("div",{className:`resource-main-list-head-filter-dropdown ${n?"active":""}`,children:v})]})]}),e.jsx("div",{className:"line"}),e.jsxs("div",{className:`resource-main-list-main ${c>=m.length?"all-loaded":""}`,children:[e.jsx("div",{className:"resource-main-list-main-inner",children:b}),e.jsx("div",{className:"line"})]}),e.jsx("div",{className:`resource-main-list-load ${c>=m.length?"hidden":""}`,children:e.jsxs("button",{className:"resource-main-list-load-btn",onClick:()=>N(c+4),children:[e.jsx("div",{className:"resource-main-list-load-btn-ic",children:e.jsx("div",{className:"ic ic-24",children:t.icArrowDown})}),e.jsx("div",{className:"txt txt-20 txt-med resource-main-list-load-btn-txt",children:"Load more"})]})})]})}export{$ as default};
