let t=[],o=(a,c)=>{let u=[],l={get(){return l.lc||l.listen(()=>{})(),l.value},l:c||0,lc:0,listen(n,i){return l.lc=u.push(n,i||l.l)/2,()=>{let f=u.indexOf(n);~f&&(u.splice(f,2),--l.lc||l.off())}},notify(n,i){let f=!t.length;for(let e=0;e<u.length;e+=2)t.push(u[e],u[e+1],l.value,n,i);if(f){for(let e=0;e<t.length;e+=5){let r;for(let s=e+1;!r&&(s+=5)<t.length;)t[s]<t[e+1]&&(r=t.push(t[e],t[e+1],t[e+2],t[e+3],t[e+4]));r||t[e](t[e+2],t[e+3],t[e+4])}t.length=0}},off(){},set(n){let i=l.value;i!==n&&(l.value=n,l.notify(i))},subscribe(n,i){let f=l.listen(n,i);return n(l.value),f},value:a};return l};const d=o(0),h=o(0);export{h as b,d as p};
